!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Bmob=t():e.Bmob=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=15)}([function(e,t,r){"use strict";var n=r(9),o=r(22),s=Object.prototype.toString;function i(e){return"[object Array]"===s.call(e)}function a(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===s.call(e)}function u(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),i(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:o,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,o=arguments.length;n<o;n++)u(arguments[n],r);return t},extend:function(e,t,r){return u(t,function(t,o){e[o]=r&&"function"==typeof t?n(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){(function(t){const n=r(3),o=r(7),s=r(40),i=r(41),a=t.Bmob||{};a._config=n.getConfig(),a.initialize=((e,t,r)=>{a._config.applicationId=e,a._config.applicationKey=t}),a.User=new i,a.Query=(e=>new o(e)),a.File=((e,t)=>new s(e,t)),e.exports=a}).call(t,r(16))},function(e,t){e.exports={isObject:e=>"[object Object]"==Object.prototype.toString.call(e),isNumber:e=>"[object Number]"==Object.prototype.toString.call(e),isString:e=>"[object String]"==Object.prototype.toString.call(e),isUndefined:e=>"[object Undefined]"==Object.prototype.toString.call(e),isBoolean:e=>"[object Boolean]"==Object.prototype.toString.call(e),isArray:e=>"[object Array]"==Object.prototype.toString.call(e),isFunction:e=>"[object Function]"==Object.prototype.toString.call(e)}},function(e,t,r){const n=r(1);let o;try{o=r(17)}catch(e){o=r(19)}const s=()=>o;e.exports={getConfig:s,getAppType:()=>{let e;return n._config=s(),e="undefined"!=typeof window?"h5":"undefined"!=typeof wx?"wx":3==n._config.type?"hap":"h5"}}},function(e,t,r){let n;const o=r(3).getAppType();console.log("type",o),"h5"==o?n=r(8):"wx"==o&&(n=r(39)),e.exports=n},function(e,t){e.exports=class{constructor(e,t){let r=new Error;return r.code=e,r.message=t?`Bmob.Error:{code:${e}, message:${t}}`:`Bmob.Error:{code:${e}, message:${this.errorMsg(e)}}`,r}errorMsg(e){switch(e){case 415:return"incorrect parameter type.";case 416:return"Parameter is null.";case 417:return"There is no upload content.";default:return"unknown error"}}}},function(e,t,r){"use strict";(function(t){var n=r(0),o=r(24),s={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:("undefined"!=typeof XMLHttpRequest?a=r(11):void 0!==t&&(a=r(11)),a),transformRequest:[function(e,t){return o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){c.headers[e]={}}),n.forEach(["post","put","patch"],function(e){c.headers[e]=n.merge(s)}),e.exports=c}).call(t,r(10))},function(e,t,r){const n=r(4),o=r(1),{isObject:s,isString:i,isNumber:a,isUndefined:c,isArray:u}=r(2),f=r(5);e.exports=class{constructor(e){this.tableName=`${o._config.parameters.QUERY}/${e}`,this.init(),this.addArray={},this.setData={}}init(){this.queryData={},this.andData={},this.orData={},this.limitNum=100,this.skipNum=0,this.includes="",this.orders=null,this.keys=null}get(e){if(!i(e))throw new f(415);let t={};const r={},o={},s={},c=(e,t)=>{if(!i(e)||!u(t))throw new f(415);s[e]={__op:"Add",objects:t}},p=(e,t)=>{if(!i(e)||!u(t))throw new f(415);s[e]={__op:"AddUnique",objects:t}},l=(e,t)=>{if(!i(e)||!u(t))throw new f(415);s[e]={__op:"Remove",objects:t}},h=(e,t=1)=>{if(!i(e)||!a(t))throw new f(415);r[e]={__op:"Increment",amount:t}},d=t=>{if(!i(e))throw new f(415);o[t]={__op:"Delete"}},m=(e,r)=>{if(!i(e)||!i(r))throw new f(415);t[e]=r},w=()=>{const i=Object.assign(o,t,r,s);return n(`${this.tableName}/${e}`,"put",i)};return new Promise((t,r)=>{n(`${this.tableName}/${e}`).then(r=>{Object.defineProperty(r,"set",{value:m}),Object.defineProperty(r,"unset",{value:d}),Object.defineProperty(r,"save",{value:w}),Object.defineProperty(r,"increment",{value:h}),Object.defineProperty(r,"add",{value:c}),Object.defineProperty(r,"remove",{value:l}),Object.defineProperty(r,"addUnique",{value:p}),Object.defineProperty(r,"destroy",{value:()=>this.destroy(e)}),t(r)}).catch(e=>{r(e)})})}destroy(e){if(!i(e))throw new f(415);return n(`${this.tableName}/${e}`,"delete")}set(e,t=""){if(!i(e)||!i(t))throw new f(415);this.setData[e]=t}add(e,t){if(!i(e)||!u(t))throw new f(415);this.addArray[e]={__op:"Add",objects:t}}addUnique(e,t){if(!i(e)||!u(t))throw new f(415);this.addArray[e]={__op:"AddUnique",objects:t}}save(e={}){if(!s(e))throw new f(415);const t=Object.assign(e,this.setData,this.addArray);return new Promise((e,r)=>{n(`${this.tableName}`,"post",t).then(t=>{this.addArray={},this.setData={},e(t)}).catch(e=>{r(e)})})}terms(e,t,r){if(!i(e))throw new f(415);const n=((e,t,r)=>{let n={},o=null;switch(o="createdAt"==e||"updateAt"==e?{__type:"Date",iso:r}:r,t){case"==":n[e]=o;break;case"!=":n[e]={$ne:o};break;case"<":n[e]={$lt:o};break;case"<=":n[e]={$lte:o};break;case">":n[e]={$gt:o};case">=":n[e]={$gte:o};break;default:throw new f(415)}return n})(e,t,r);return Object.keys(this.queryData).length?c(this.queryData.$and)?this.queryData={$and:[this.queryData,n]}:this.queryData.$and.push(n):this.queryData=n,n}or(...e){e.map((e,t)=>{if(!s(e))throw new f(415)});const t=this.queryData.$and;if(!c(t))for(let r=0;r<t.length;r++)for(let n=0;n<e.length;n++)JSON.stringify(t[r])==JSON.stringify(e[n])&&this.queryData.$and.splice(r,1);this.orData={$or:e}}and(...e){e.map((e,t)=>{if(!s(e))throw new f(415)}),this.andData={$and:e}}limit(e){if(!a(e))throw new f(415);e>1e3&&(e=1e3),this.limitNum=e}skip(e){if(!a(e))throw new f(415);this.skipNum=e}order(...e){e.map(e=>{if(!i(e))throw new f(415)}),this.orders=e.join(",")}include(...e){e.map(e=>{if(!i(e))throw new f(415)}),this.includes=e.join(",")}select(...e){e.map(e=>{if(!i(e))throw new f(415)}),this.keys=e.join(",")}find(){let e={},t={},r={};Object.keys(this.queryData).length&&(t.where=this.queryData),Object.keys(this.andData).length&&(t.where=Object.assign(this.andData,this.queryData)),Object.keys(this.orData).length&&(t.where=Object.assign(this.orData,this.queryData)),t.limit=this.limitNum,t.skip=this.skipNum,t.include=this.includes,t.order=this.orders,t.keys=this.keys;for(const e in t)(t.hasOwnProperty(e)&&null==t[e]||0==t[e])&&delete t[e];const o=(t,r)=>{if(console.log(t,r),!t||!r)throw new f(415);e[t]=r},s=(t="updata")=>{if(console.log(t),r.length<1)throw new f(416);let o,s,i="put",a=new Array;r.map(r=>("/undefined"==(o=`/${r.objectId}`)&&(o="",i="post"),s={method:i,path:`${this.tableName}${o}`,body:e},"delete"==t&&(s={method:"DELETE",path:`${this.tableName}${o}`}),a.push(s),r));let c={requests:a};return Object.assign(e),n("/1/batch","POST",c)},i=()=>s(),a=()=>s("delete");return new Promise((e,s)=>{n(`${this.tableName}`,"get",t).then(({results:t})=>{this.init(),Object.defineProperty(t,"set",{value:o}),Object.defineProperty(t,"saveAll",{value:i}),Object.defineProperty(t,"destroyAll",{value:a}),r=t,e(t)}).catch(e=>{s(e)})})}count(){return new Promise((e,t)=>{n(`${this.tableName}`,"get",{count:1}).then(({count:t})=>{e(t)}).catch(e=>{t(e)})})}}},function(e,t,r){const n=r(20),o=r(1);r(3);var s;e.exports=((e,t="get",r={})=>new Promise((i,a)=>{const c={"content-type":"application/json","X-Bmob-SDK-Type":"wechatApp","X-Bmob-Application-Id":(s=o._config).applicationId,"X-Bmob-REST-API-Key":s.applicationKey},u=n.create({baseURL:o._config.host,headers:c,validateStatus:e=>e<500}),f={url:e,method:t};"get"==f.method?f.params=r:f.data=r,u(f).then(({data:e})=>{e.code&&a(e),i(e)}).catch(e=>{a(e)})}))},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t){var r,n,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c,u=[],f=!1,p=-1;function l(){f&&c&&(f=!1,c.length?u=c.concat(u):p=-1,u.length&&h())}function h(){if(!f){var e=a(l);f=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||f||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";(function(t){var n=r(0),o=r(25),s=r(27),i=r(28),a=r(29),c=r(12),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(30);e.exports=function(e){return new Promise(function(f,p){var l=e.data,h=e.headers;n.isFormData(l)&&delete h["Content-Type"];var d=new XMLHttpRequest,m="onreadystatechange",w=!1;if("test"===t.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||a(e.url)||(d=new window.XDomainRequest,m="onload",w=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var g=e.auth.username||"",y=e.auth.password||"";h.Authorization="Basic "+u(g+":"+y)}if(d.open(e.method.toUpperCase(),s(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[m]=function(){if(d&&(4===d.readyState||w)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in d?i(d.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:t,config:e,request:d};o(f,p,r),d=null}},d.onerror=function(){p(c("Network Error",e,null,d)),d=null},d.ontimeout=function(){p(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},n.isStandardBrowserEnv()){var b=r(31),S=(e.withCredentials||a(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;S&&(h[e.xsrfHeaderName]=S)}if("setRequestHeader"in d&&n.forEach(h,function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete h[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),p(e),d=null)}),void 0===l&&(l=null),d.send(l)})}}).call(t,r(10))},function(e,t,r){"use strict";var n=r(26);e.exports=function(e,t,r,o,s){var i=new Error(e);return n(i,t,r,o,s)}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){const n=r(1),{generateCode:o,sendMessage:s,getAccessToken:i,sendWeAppMessage:a,refund:c,notifyMsg:u,functions:f,timestamp:p,requestPasswordReset:l,resetPasswordBySmsCode:h,updateUserPassword:d,push:m}=r(45),{requestSmsCode:w,verifySmsCode:g}=r(46);n.generateCode=o,n.sendMessage=s,n.getAccessToken=i,n.sendWeAppMessage=a,n.refund=c,n.notifyMsg=u,n.requestSmsCode=w,n.verifySmsCode=g,n.functions=f,n.timestamp=p,n.requestPasswordReset=l,n.resetPasswordBySmsCode=h,n.updateUserPassword=d,n.push=m;try{window.Bmob=n}catch(e){wx.Bmob=n}e.exports=n},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){const n=`v${r(18).version}`;e.exports={host:"https://api.bmob.cn",applicationId:"",applicationKey:"",parameters:{GENERATECODE:"/1/wechatApp/qr/generatecode",GETACCESSTOKEN:"/1/wechatApp/getAccessToken",SENDWEAPPMESSAGE:"/1/wechatApp/SendWeAppMessage",NOTIFYMSG:"/1/wechatApp/notifyMsg",REFUND:"/1/pay/refund",REQUESTSMSCODE:"/1/requestSmsCode",VERIFYSMSCODE:"/1/verifySmsCode",FUNCTIONS:"/1/functions",REQUESTPASSWORDRESET:"/1/requestPasswordReset",RESETPASSWORDBYSMSCODE:"/1/resetPasswordBySmsCode",UPDATEUSERPASSWORD:"/1/updateUserPassword",PUSH:"/1/push",FILES:"/2/files",DELFILES:"/2/cdnBatchDelete",TIMESTAMP:"/1/timestamp",LOGIN:"/1/login",REGISTER:"/1/users",REQUEST_EMAIL_VERIFY:"/1/requestEmailVerify",USERS:"/1/users",QUERY:"/1/classes"},version:n,type:1}},function(e,t){e.exports={name:"js-sdk",version:"1.0.0",description:"Bmob SDK",main:"./src/lib/app.js",scripts:{test:'echo "Error: no test specified" && exit 1',build:"webpack --config config/prod.env.js",watch:"webpack --watch --config config/prod.env.js",dev:"webpack-dev-server --config config/dev.env.js"},repository:{type:"git",url:"git+https://github.com/bmob/bmob-js-sdk-es6"},author:"Bmob",license:"ISC",bugs:{url:"https://github.com/bmob/bmob-js-sdk-es6/issues"},homepage:"https://github.com/bmob/bmob-js-sdk-es6#readme",dependencies:{axios:"^0.18.0","node.extend":"^2.0.0",webpack:"^3.10.0"},devDependencies:{"clean-webpack-plugin":"^0.1.17","html-webpack-plugin":"^2.30.1","uglifyjs-webpack-plugin":"^1.1.6","webpack-dev-server":"^2.9.7"}}},function(e,t){e.exports={}},function(e,t,r){e.exports=r(21)},function(e,t,r){"use strict";var n=r(0),o=r(9),s=r(23),i=r(6);function a(e){var t=new s(e),r=o(s.prototype.request,t);return n.extend(r,s.prototype,t),n.extend(r,t),r}var c=a(i);c.Axios=s,c.create=function(e){return a(n.merge(i,e))},c.Cancel=r(14),c.CancelToken=r(37),c.isCancel=r(13),c.all=function(e){return Promise.all(e)},c.spread=r(38),e.exports=c,e.exports.default=c},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))||!!e._isBuffer);var t}},function(e,t,r){"use strict";var n=r(6),o=r(0),s=r(32),i=r(33);function a(e){this.defaults=e,this.interceptors={request:new s,response:new s}}a.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),(e=o.merge(n,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[i,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},o.forEach(["delete","get","head","options"],function(e){a.prototype[e]=function(t,r){return this.request(o.merge(r||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){a.prototype[e]=function(t,r,n){return this.request(o.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=a},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){"use strict";var n=r(12);e.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e}},function(e,t,r){"use strict";var n=r(0);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(n.isURLSearchParams(t))s=t.toString();else{var i=[];n.forEach(t,function(e,t){null!==e&&void 0!==e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),i.push(o(t)+"="+o(e))}))}),s=i.join("&")}return s&&(e+=(-1===e.indexOf("?")?"?":"&")+s),e}},function(e,t,r){"use strict";var n=r(0),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,s,i={};return e?(n.forEach(e.split("\n"),function(e){if(s=e.indexOf(":"),t=n.trim(e.substr(0,s)).toLowerCase(),r=n.trim(e.substr(s+1)),t){if(i[t]&&o.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}}),i):i}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(){this.message="String contains an invalid character"}o.prototype=new Error,o.prototype.code=5,o.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,r,s=String(e),i="",a=0,c=n;s.charAt(0|a)||(c="=",a%1);i+=c.charAt(63&t>>8-a%1*8)){if((r=s.charCodeAt(a+=.75))>255)throw new o;t=t<<8|r}return i}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,s,i){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(s)&&a.push("domain="+s),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(0);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=o},function(e,t,r){"use strict";var n=r(0),o=r(34),s=r(13),i=r(6),a=r(35),c=r(36);function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return u(e),e.baseURL&&!a(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||i.adapter)(e).then(function(t){return u(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(u(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(14);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new n(e),t(r.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},e.exports=o},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){const n=r(1);r(3);var o;e.exports=((e,t="get",r={})=>new Promise((s,i)=>{const a={"content-type":"application/json","X-Bmob-SDK-Type":"wechatApp","X-Bmob-Application-Id":(o=n._config).applicationId,"X-Bmob-REST-API-Key":o.applicationKey};wx.request({url:n._config.host+e,method:t,data:r,header:a,success:e=>{console.log(e.data),s(e.data)},fail:e=>{console.log(e)}})}))},function(e,t,r){const n=r(4),o=r(1),s=r(5),{isObject:i,isString:a,isArray:c}=r(2),u=[];e.exports=class{constructor(e,t){if(e&&t){if(!a(e))throw new s(415);u.push({route:`${o._config.parameters.FILES}/${e}`,data:t})}}save(){if(!u.length)throw new s(417);return new Promise((e,t)=>{const r=[];for(let o of u)n(o.route,"post",o.data).then(({url:n})=>{r.push(n),r.length==u.length&&(e(r),t(r))}).catch(e=>{r.push(e)})})}destroy(e){if(a(e))return n(`${o._config.parameters.FILES}/upyun/${e.split(".com/")[1]}`,"delete");if(c(e)){const t=[];return e.map(e=>{t.push(e.split(".com/")[1])}),n(o._config.parameters.DELFILES,"post",{upyun:t})}throw new s(415)}}},function(e,t,r){const n=r(4),o=r(42),s=r(7),i=r(1),a=r(5),{isObject:c,isString:u,isNumber:f}=r(2);e.exports=class extends s{constructor(){super("_User")}set(e,t=""){u(e)&&(this.setData[e]=t)}requestEmailVerify(e){if(!u(e))throw new a(415);this.setData=Object.assign({},{email:e}),console.log(this.setData);let t=i._config.parameters.REQUEST_EMAIL_VERIFY;return n(t,"post",this.setData)}register(e){if(!c(e))throw new a(415);this.setData=Object.assign(this.setData,e),console.log(this.setData);let t=i._config.parameters.REGISTER;return n(t,"post",this.setData)}login(e,t){if(!u(e)||!u(t))throw new a(415);this.setData=Object.assign({},{username:e,password:t});let r=i._config.parameters.LOGIN;return new Promise((e,t)=>{n(r,"get",this.setData).then(t=>{o.save("bmob",t),e(t)}).catch(e=>{console.log("登陆失败"),t(e)})})}users(){let e=i._config.parameters.USERS;return n(e,"get")}signOrLoginByMobilePhone(e,t){if(!f(e)||!f(t))throw new a(415);this.setData=Object.assign({},{mobilePhoneNumber:e,smsCode:t});let r=i._config.parameters.LOGIN;return n(r,"get",this.setData)}requestOpenId(e){return n("/1/wechatApp/"+e,"POST",{})}linkWith(e){let t={authData:e},r=i._config.parameters.USERS;return n(r,"POST",t)}loginWithWeapp(e){return new Promise((t,r)=>{this.requestOpenId(e).then(e=>{const r={weapp:e},n=this.linkWith(r);t(n)}).catch(e=>{r(e)})})}current(){const e=o.fetch("bmob");return JSON.parse(e)}upInfo(e){console.log("userInfo",e);var t=e.nickName,r=e.avatarUrl,n=this.current();n||console.log("未获取到用户信息");var s=o.fetch("openid");console.log(n,s),this.get(n.objectId).then(e=>{console.log(e),e.set("nickName",t),e.set("userPic",r),e.set("openid",s),e.save()}).catch(e=>{console.log(e)})}auth(){var e=this;return new Promise((t,r)=>{const n=()=>{wx.login({success:n=>{e.loginWithWeapp(n.code).then(e=>{var r=e.authData.weapp.openid;o.save("openid",r),o.save("bmob",e),t(e)},function(e){r(e)})}})};wx.checkSession({success:function(){console.log("用户在线中"),t("用户在线中"),n()},fail:()=>{n()}})})}}},function(e,t,r){let n;const o=r(3).getAppType();console.log("type",o),"h5"==o?n=r(43):"wx"==o&&(n=r(44)),e.exports=n},function(e,t,r){const{isObject:n,isString:o,isNumber:s}=r(2),i={save(e,t){if(!o(e)||!t)throw new error(415);localStorage.setItem(e,JSON.stringify(t))},fetch(e){if(!o(e))throw new error(415);return JSON.parse(localStorage.getItem(e))||null},remove(e){if(!o(e))throw new error(415);localStorage.removeItem(e)},clear(){localStorage.clear()}};e.exports=i},function(e,t,r){const{isObject:n,isString:o,isNumber:s}=r(2),i={save(e,t){if(!o(e)||!t)throw new error(415);return wx.setStorageSync(e,JSON.stringify(t))},fetch(e){if(!o(e))throw new error(415);return wx.getStorageSync(e)||null},remove(e){if(!o(e))throw new error(415);return wx.removeStorageSync(e)},clear:()=>wx.clearStorageSync()};e.exports=i},function(e,t,r){const n=r(4),o=(r(8),r(1)),s=r(5),{isObject:i,isString:a}=r(2);e.exports={generateCode:e=>{if(!i(e))throw new s(415);let t=o._config.parameters.GENERATECODE;return n(t,"post",e)},sendMessage:e=>1,getAccessToken:e=>{let t=o._config.parameters.GETACCESSTOKEN;return n(t,"get")},sendWeAppMessage:e=>{if(!i(e))throw new s(415);let t=o._config.parameters.SENDWEAPPMESSAGE;return n(t,"post",e)},refund:e=>{if(!i(e))throw new s(415);let t=o._config.parameters.REFUND;return n(t,"post",e)},notifyMsg:e=>{if(!i(e))throw new s(415);let t=o._config.parameters.NOTIFYMSG;return n(t,"post",e)},functions:(e,t)=>{if(t||(t={}),!a(e))throw new s(415);let r=`${o._config.parameters.FUNCTIONS}/${e}`;return n(r,"post",t)},timestamp:()=>{let e=o._config.parameters.TIMESTAMP;return n(e,"get")},requestPasswordReset:e=>{if(!i(e))throw new s(415);let t=o._config.parameters.REQUESTPASSWORDRESET;return n(t,"post",e)},resetPasswordBySmsCode:(e,t)=>{if(!a(e))throw new s(415);let r=`${o._config.parameters.RESETPASSWORDBYSMSCODE}/${e}`;return n(r,"put",t)},updateUserPassword:(e,t)=>{if(!i(t)||!a(e))throw new s(415);let r=`${o._config.parameters.UPDATEUSERPASSWORD}/${e}`;return n(r,"put",t)},push:e=>{if(!i(e))throw new s(415);let t=o._config.parameters.PUSH;return n(t,"post",e)}}},function(e,t,r){const n=r(4),o=r(1),s=r(5),{isObject:i,isString:a}=r(2);e.exports={requestSmsCode:(e,t)=>{if(!i(e))throw new s(415);let r=o._config.parameters.REQUESTSMSCODE;return n(r,"post",e)},verifySmsCode:(e,t)=>{if(!a(e))throw new s(415);let r=`${o._config.parameters.VERIFYSMSCODE}/${e}`;return n(r,"post")}}}])});